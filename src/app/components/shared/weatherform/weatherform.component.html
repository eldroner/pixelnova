<div class="weather-container">
  <!-- 游댳 Texto descriptivo -->
  <p class="weather-text">
    Comprueba el tiempo en tu localidad para un d칤a concreto.
  </p>

  <!-- 游댳 Contenedor del formulario para que en m칩vil se mantenga en una fila -->
  <div class="form-wrapper">
    <!-- 游댳 Formulario compacto -->
<form (ngSubmit)="onSubmit()" class="d-flex gap-2 align-items-center weather-form">
  <!-- 游댳 Input de Municipio -->
  <div class="flex-grow-1 position-relative">
    <input 
      type="text" 
      id="municipio"
      class="form-control"
      placeholder="Municipio..."
      (input)="filtrarMunicipios($event)"
      [(ngModel)]="municipioNombre" 
      name="municipio"
      required
      autocomplete="off"
    />
    <!-- 游댳 Lista de sugerencias -->
    <ul class="list-group position-absolute w-100 mt-1 z-index-2" *ngIf="municipiosFiltrados.length > 0">
      <li 
        class="list-group-item list-group-item-action"
        *ngFor="let municipio of municipiosFiltrados"
        (click)="seleccionarMunicipio(municipio)">
        {{ municipio.nombre }}
      </li>
    </ul>
  </div>

  <!-- 游댳 Selector de Fecha -->
  <div class="date-container">
    <input 
      id="fecha" 
      type="date" 
      class="form-control small-input"
      [(ngModel)]="fecha" 
      name="fecha"
      required
    />
  </div>

  <!-- 游댳 칈cono en lugar de bot칩n -->
  <button type="submit" class="btn-icon">
    <i class="bi bi-search"></i> <!-- 칈cono de b칰squeda -->
  </button>
</form>

  </div>
</div>

<!-- 游댳 Modal para mostrar los resultados -->
<div class="modal fade" id="weatherModal" tabindex="-1" aria-labelledby="weatherModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="weatherModalLabel">Pron칩stico del tiempo - {{ formatDate(fecha) }} </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <h3 class="modal-location">
          游깴 {{ municipioSeleccionado?.nombre }}
        </h3>
      
        <table class="table table-hover">
          <thead>
            <tr>
              <th>M치xima</th>
              <th>M칤nima</th>
              <th>쯃Luvia?</th>
              <th>E. Cielo</th>
              <th>Viento</th> <!-- 游댳 NUEVA COLUMNA -->
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of filteredWeatherData">
              <td>{{ item.temperatura?.maxima ?? 'N/A' }}춿C</td>
              <td>{{ item.temperatura?.minima ?? 'N/A' }}춿C</td>
              <td>{{ item.probPrecipitacion?.[0]?.value ?? 'N/A' }}%</td>
              <td><strong>{{ item.estadoCielo?.[0]?.descripcion ?? 'N/A' }}</strong></td>
              <td>
                {{ item.vientoVelocidad }} km/h 
                <span *ngIf="item.vientoDireccion !== 'N/A'">({{ item.vientoDireccion }})</span>
              </td>
            </tr>
          </tbody>
          
          
        </table>
      </div>
      
      
    </div>
  </div>
</div>
