<div class="weather-container">
  <!-- üîπ En m√≥viles, ocultar el texto y mostrar solo un icono -->
  <p class="weather-text d-none d-md-block">
    üå¶Ô∏è Comprueba el tiempo para planificar tu vuelo.
  </p>

  <!-- üîπ Formulario optimizado -->
  <div class="form-wrapper">
    <form (ngSubmit)="onSubmit()" class="weather-form">
      <!-- üîπ Input Municipio -->
      <div class="input-group">
        <input 
        type="text" 
        id="municipio"
        #municipioInput
        class="form-control"
        placeholder="Municipio..."
        (input)="filtrarMunicipios($event)"
        [(ngModel)]="municipioNombre" 
        name="municipio"
        required
        autocomplete="off"
      />
        <!-- üîπ Lista de sugerencias -->
        <ul class="list-group position-absolute w-100 mt-1 z-index-2" *ngIf="municipiosFiltrados.length > 0">
          <li 
            class="list-group-item list-group-item-action"
            *ngFor="let municipio of municipiosFiltrados"
            (click)="seleccionarMunicipio(municipio)">
            {{ municipio.nombre }}
          </li>
        </ul>
      </div>

      <!-- üîπ Selector de Fecha -->
      <input 
        id="fecha" 
        type="date" 
        class="form-control small-input"
        [(ngModel)]="fecha" 
        name="fecha"
        required
      />

      <!-- üîπ Bot√≥n con solo icono -->
      <button type="submit" class="btn-icon">
        <i class="bi bi-search"></i>
      </button>
    </form>
  </div>
</div>


<!-- üîπ Modal para mostrar los resultados -->
<div class="modal fade" id="weatherModal" tabindex="-1" aria-labelledby="weatherModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="weatherModalLabel">Pron√≥stico - {{ formatDate(fecha) }} </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <h3 class="modal-location">
          üåç {{ municipioSeleccionado?.nombre }}
        </h3>
      
        <table class="table table-hover">
          <thead>
            <tr>
              <th>M√°xima</th>
              <th>M√≠nima</th>
              <th>¬øLLuvia?</th>
              <th>E. Cielo</th>
              <th>Viento</th> <!-- üîπ NUEVA COLUMNA -->
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of filteredWeatherData">
              <td>{{ item.temperatura?.maxima ?? 'N/A' }}¬∞C</td>
              <td>{{ item.temperatura?.minima ?? 'N/A' }}¬∞C</td>
              <td>{{ item.probPrecipitacion?.[0]?.value ?? 'N/A' }}%</td>
              <td><strong>{{ item.estadoCielo?.[0]?.descripcion ?? 'N/A' }}</strong></td>
              <td>
                {{ item.vientoVelocidad }} km/h 
                <span *ngIf="item.vientoDireccion !== 'N/A'">({{ item.vientoDireccion }})</span>
              </td>
            </tr>
          </tbody>
          
          
        </table>
      </div>
      
      
    </div>
  </div>
</div>
